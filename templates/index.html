<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <link rel="stylesheet"  href="/static/css/style.css">
  <title>残業管理アプリ</title>
  <script
  src="https://code.jquery.com/jquery-3.5.1.js"
  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous">
  </script>
</head>

<body>
  <main>
    <div id="title" class="title">残業時間</div>
    <form name="f" method="post">
      <div class="text_area">
        <input type="date" name="new_date" id="new_date">
        <input type="number" name="new_text" id="new_text">
      </div>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>出勤日</th>
            <th>日付</th>
            <th>曜日</th>
            <th>残業時間</th>
            <th>月間残業時間</th>
            <th>36残業時間</th>
          </tr>
        </thead>
        <tbody>
          {% for overtime in overtimes %}
            <tr>
              <td>
                {{ overtime.id }}
              </td>
              <td>
                <label>
                  出勤
                  {% if overtime.status == 0 %}
                  <input type="checkbox" name="status">
                  {% else %}
                  <input type="checkbox" name="status" checked>
                  {% endif %}
                </label>
              </td>
              <td>
                {{ overtime.date }}
              </td>
              <td>
                {% if overtime.weekday == 0 %}月
                {% elif overtime.weekday == 1 %}火
                {% elif overtime.weekday == 2 %}水
                {% elif overtime.weekday == 3 %}木
                {% elif overtime.weekday == 4 %}金
                {% elif overtime.weekday == 5 %}土
                {% elif overtime.weekday == 6 %}日
                {% endif %}
              </td>
              <td>
                <input type="text" value="{{ overtime.time }}" name = "time_{{overtime.id}}" id="time_{{overtime.id}}">
              </td>
              <td>
                {{ overtime.total_time}}
              </td>
              <td>
                {{ overtime.time_36}}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <input type="submit" value="更新">
    </form>
  </main>

  <a href="/create">データ作成</a>  
  <a href="/delete">データ削除</a>

  <script>
    $(document).ready(function(){
      $('#new_text').keydown(function(e) {
        if (e.keyCode == 13) {
          $('form[name="f"]').attr('action', '/new')
          $('form[name="f"]').submit();
        }
      });
    });
  </script>  
</body>

</html>
